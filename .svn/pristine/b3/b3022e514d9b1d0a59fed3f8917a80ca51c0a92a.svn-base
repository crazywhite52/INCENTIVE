{"ast":null,"code":"import _defineProperty from \"D:\\\\Work_Project\\\\ReactJs\\\\NewIncentive2020\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\Work_Project\\\\ReactJs\\\\NewIncentive2020\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Work_Project\\\\ReactJs\\\\NewIncentive2020\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Work_Project\\\\ReactJs\\\\NewIncentive2020\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Work_Project\\\\ReactJs\\\\NewIncentive2020\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Work_Project\\\\ReactJs\\\\NewIncentive2020\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Work_Project\\\\ReactJs\\\\NewIncentive2020\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Work_Project\\\\ReactJs\\\\NewIncentive2020\\\\src\\\\components\\\\authlogin\\\\Login.js\";\nimport React, { Component } from \"react\";\nimport Input from \"@material-ui/core/Input\";\nimport Button from \"@material-ui/core/Button\";\nimport AuthService from \"./AuthService\";\nimport { withSnackbar } from \"notistack\";\nimport { MDBBtn, MDBIcon } from \"mdbreact\";\nimport \"./Login.css\";\nimport logo from \"./JIB-LOGO/jib-logo-white2.png\";\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this));\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.state = {\n      message: \"\",\n      open: false,\n      username: null,\n      password: null,\n      profile: {}\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleFormSubmit = _this.handleFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleLogout = _this.handleLogout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.chktime = _this.chktime.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.Auth = new AuthService();\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      window.removeEventListener(\"resize\", this._handleWindowResize);\n      if (this.Auth.loggedIn()) this.props.history.replace(\"/\");\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.Auth.loggedIn()) {\n        var profile = this.Auth.getProfile();\n        this.setState({\n          profile: profile\n        });\n        this.props.enqueueSnackbar(\"ยินดีต้อนรับ เข้าสู่ระบบ.....\", {\n          variant: \"success\"\n        });\n      }\n    }\n  }, {\n    key: \"chktime\",\n    value: function chktime() {\n      var timeAfter30Mins = new Date(this.state.profile.exp * 1000);\n      var limit = timeAfter30Mins.getDate() + '/' + (timeAfter30Mins.getMonth() + 1) + '/' + timeAfter30Mins.getFullYear() + ' เวลา ' + timeAfter30Mins.getHours() + ':' + timeAfter30Mins.getMinutes() + ':' + timeAfter30Mins.getSeconds() + ' น.';\n      return limit;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          vertical = _this$state.vertical,\n          horizontal = _this$state.horizontal,\n          open = _this$state.open;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"background2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"loginForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"hgroup\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          width: \"150px\"\n        },\n        src: logo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      })), React.createElement(\"k\", {\n        style: {\n          color: \"#ffffff\",\n          fontSize: \"14px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Incentive Systems\")), !this.Auth.loggedIn() && React.createElement(\"form\", {\n        onSubmit: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Input, {\n        autoFocus: true,\n        autoComplete: \"off\",\n        placeholder: \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\",\n        type: \"text\",\n        name: \"username\",\n        onChange: this.handleChange,\n        inputProps: {\n          \"aria-label\": \"Description\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(Input, {\n        autoComplete: \"off\",\n        placeholder: \"password\",\n        type: \"password\",\n        name: \"password\",\n        onChange: this.handleChange,\n        inputProps: {\n          \"aria-label\": \"Description\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(MDBBtn, {\n        gradient: \"purple\",\n        type: \"supmit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\")), this.Auth.loggedIn() && React.createElement(\"div\", {\n        style: {\n          color: \"green\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(\"h5\", {\n        style: {\n          textAlign: \"left\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"k\", {\n        style: {\n          color: \"black\",\n          margin: 20,\n          marginLeft: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(MDBIcon, {\n        icon: \"check-circle\",\n        size: \"2x\",\n        className: \"green-text pr-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), \" \", \"\\u0E04\\u0E38\\u0E13\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E2D\\u0E22\\u0E39\\u0E48\", \" \")), React.createElement(\"h6\", {\n        style: {\n          textAlign: \"left\",\n          margin: 20,\n          marginLeft: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"k\", {\n        style: {\n          color: \"black\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19 :\"), \" \", this.state.profile.username), React.createElement(\"h6\", {\n        style: {\n          textAlign: \"left\",\n          margin: 20,\n          marginLeft: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"k\", {\n        style: {\n          color: \"black\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49 : \"), this.state.profile.fullname), React.createElement(\"h6\", {\n        style: {\n          textAlign: \"left\",\n          margin: 20,\n          marginLeft: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"k\", {\n        style: {\n          color: \"black\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"\\u0E2B\\u0E21\\u0E14\\u0E40\\u0E27\\u0E25\\u0E32 :\"), \" \", this.chktime()), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(MDBBtn, {\n        gradient: \"peach\",\n        type: \"button\",\n        style: {\n          color: \"white\"\n        },\n        onClick: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }))));\n    }\n  }, {\n    key: \"handleFormSubmit\",\n    value: function handleFormSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n\n      if (this.state.username === null || this.state.username === \"\" || this.state.password === \"\" || this.state.password === null) {\n        this.props.enqueueSnackbar(\"รหัสผู้ใช้หรือ พาสเวิร์ดไม่ถูกต้อง ลองใหม่อีกครั้ง..\", {\n          variant: \"error\"\n        });\n      } else {\n        this.Auth.login(this.state.username, this.state.password).then(function (res) {\n          if (res.accessapp === false) {\n            _this2.props.enqueueSnackbar(\"รหัสผู้ใช้หรือ พาสเวิร์ดไม่ถูกต้อง ลองใหม่อีกครั้ง..\", {\n              variant: \"error\"\n            });\n          } else {\n            //  console.log(res)\n            window.location.reload(); //  this.props.history.reload('/');\n          }\n        }).catch(function (err) {\n          _this2.props.enqueueSnackbar(\"รหัสผู้ใช้หรือ พาสเวิร์ดไม่ถูกต้อง ลองใหม่อีกครั้ง..\", {\n            variant: \"error\"\n          });\n        });\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"handleLogout\",\n    value: function handleLogout() {\n      this.Auth.logout();\n      window.location.reload();\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default withSnackbar(Login);","map":{"version":3,"sources":["D:\\Work_Project\\ReactJs\\NewIncentive2020\\src\\components\\authlogin\\Login.js"],"names":["React","Component","Input","Button","AuthService","withSnackbar","MDBBtn","MDBIcon","logo","Login","handleClose","setState","open","state","message","username","password","profile","handleChange","bind","handleFormSubmit","handleLogout","chktime","Auth","window","removeEventListener","_handleWindowResize","loggedIn","props","history","replace","getProfile","enqueueSnackbar","variant","timeAfter30Mins","Date","exp","limit","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","vertical","horizontal","width","color","fontSize","textAlign","margin","marginLeft","fullname","e","preventDefault","login","then","res","accessapp","location","reload","catch","err","target","name","value","logout"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AuthService from \"./AuthService\";\r\nimport { withSnackbar } from \"notistack\";\r\nimport { MDBBtn, MDBIcon } from \"mdbreact\";\r\nimport \"./Login.css\";\r\nimport logo from \"./JIB-LOGO/jib-logo-white2.png\";\r\nclass Login extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      message: \"\",\r\n      open: false,\r\n      username: null,\r\n      password: null,\r\n      profile: {}\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n    this.chktime = this.chktime.bind(this);\r\n    this.Auth = new AuthService();\r\n  }\r\n  componentWillMount() {\r\n    window.removeEventListener(\"resize\", this._handleWindowResize);\r\n    if (this.Auth.loggedIn()) this.props.history.replace(\"/\");\r\n  }\r\n  componentDidMount() {\r\n    if (this.Auth.loggedIn()) {\r\n      let profile = this.Auth.getProfile();\r\n      this.setState({ profile: profile });\r\n      this.props.enqueueSnackbar(\"ยินดีต้อนรับ เข้าสู่ระบบ.....\", {\r\n        variant: \"success\"\r\n      });\r\n    }\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({ open: false });\r\n  };\r\n  chktime() {\r\n   \r\n    let timeAfter30Mins = new Date(this.state.profile.exp*1000);\r\n    var limit = timeAfter30Mins.getDate()+'/'+(timeAfter30Mins.getMonth()+1)+'/'+timeAfter30Mins.getFullYear()+' เวลา '+timeAfter30Mins.getHours()+':'+timeAfter30Mins.getMinutes()+':'+timeAfter30Mins.getSeconds()+' น.';\r\n  \r\n    return (limit);\r\n  }\r\n\r\n  render() {\r\n    const { vertical, horizontal, open } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"background\" />\r\n        <div className=\"background2\" />\r\n        <div className=\"loginForm\">\r\n          <hgroup>\r\n            <h1>\r\n              <img style={{ width: \"150px\" }} src={logo} />\r\n            </h1>\r\n            <k style={{ color: \"#ffffff\", fontSize: \"14px\" }}>\r\n              Incentive Systems\r\n            </k>\r\n          </hgroup>\r\n          {!this.Auth.loggedIn() && (\r\n            <form onSubmit={this.handleFormSubmit}>\r\n              <Input\r\n                autoFocus\r\n                autoComplete={\"off\"}\r\n                placeholder=\"รหัสพนักงาน\"\r\n                type=\"text\"\r\n                name=\"username\"\r\n                onChange={this.handleChange}\r\n                inputProps={{\r\n                  \"aria-label\": \"Description\"\r\n                }}\r\n              />\r\n              <br />\r\n              <br />\r\n              <Input\r\n                autoComplete={\"off\"}\r\n                placeholder=\"password\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                onChange={this.handleChange}\r\n                inputProps={{\r\n                  \"aria-label\": \"Description\"\r\n                }}\r\n              />\r\n              <br /> <br />\r\n              <MDBBtn gradient=\"purple\" type=\"supmit\">\r\n                เข้าสู่ระบบ\r\n              </MDBBtn>\r\n              {/* <Button variant=\"contained\" type=\"supmit\">\r\n                {\" \"}\r\n                เข้าระบบ\r\n              </Button> */}\r\n            </form>\r\n          )}\r\n          {this.Auth.loggedIn() && (\r\n            <div style={{ color: \"green\" }}>\r\n              <br />\r\n\r\n              <h5 style={{ textAlign: \"left\" }}>\r\n                <k style={{ color: \"black\", margin: 20, marginLeft: 30 }}>\r\n                  <MDBIcon\r\n                    icon=\"check-circle\"\r\n                    size=\"2x\"\r\n                    className=\"green-text pr-3\"\r\n                  />{\" \"}\r\n                  คุณกำลังใช้งานระบบอยู่{\" \"}\r\n                </k>\r\n              </h5>\r\n              <h6 style={{ textAlign: \"left\", margin: 20, marginLeft: 30 }}>\r\n                <k style={{ color: \"black\" }}>รหัสผู้ใช้งาน :</k>{\" \"}\r\n                {this.state.profile.username}\r\n              </h6>\r\n              <h6 style={{ textAlign: \"left\", margin: 20, marginLeft: 30 }}>\r\n                <k style={{ color: \"black\" }}>ชื่อผู้ใช้ : </k>\r\n                {this.state.profile.fullname}\r\n              </h6>\r\n              <h6 style={{ textAlign: \"left\", margin: 20, marginLeft: 30 }}>\r\n                <k style={{ color: \"black\" }}>หมดเวลา :</k> {this.chktime()}\r\n              </h6>\r\n              <br />\r\n              <MDBBtn\r\n                gradient=\"peach\"\r\n                type=\"button\"\r\n                style={{ color: \"white\" }}\r\n                onClick={this.handleLogout}\r\n              >\r\n                ออกจากระบบ\r\n              </MDBBtn>\r\n              {/* <Button\r\n                variant=\"contained\"\r\n                type=\"button\"\r\n                onClick={this.handleLogout}\r\n              >\r\n                {\" \"}\r\n                ออกจากระบบ\r\n              </Button> */}\r\n              <br />\r\n              <br />\r\n              <br />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  handleFormSubmit(e) {\r\n    e.preventDefault();\r\n    if (\r\n      this.state.username === null ||\r\n      this.state.username === \"\" ||\r\n      this.state.password === \"\" ||\r\n      this.state.password === null\r\n    ) {\r\n      this.props.enqueueSnackbar(\r\n        \"รหัสผู้ใช้หรือ พาสเวิร์ดไม่ถูกต้อง ลองใหม่อีกครั้ง..\",\r\n        {\r\n          variant: \"error\"\r\n        }\r\n      );\r\n    } else {\r\n      this.Auth.login(this.state.username, this.state.password)\r\n        .then(res => {\r\n          if (res.accessapp === false) {\r\n            this.props.enqueueSnackbar(\r\n              \"รหัสผู้ใช้หรือ พาสเวิร์ดไม่ถูกต้อง ลองใหม่อีกครั้ง..\",\r\n              {\r\n                variant: \"error\"\r\n              }\r\n            );\r\n          } else {\r\n            //  console.log(res)\r\n            window.location.reload();\r\n            //  this.props.history.reload('/');\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.props.enqueueSnackbar(\r\n            \"รหัสผู้ใช้หรือ พาสเวิร์ดไม่ถูกต้อง ลองใหม่อีกครั้ง..\",\r\n            {\r\n              variant: \"error\"\r\n            }\r\n          );\r\n        });\r\n    }\r\n  }\r\n  handleChange(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n  handleLogout() {\r\n    this.Auth.logout();\r\n    window.location.reload();\r\n  }\r\n}\r\nexport default withSnackbar(Login);\r\n"]},"metadata":{},"sourceType":"module"}